echo "ğŸš€ Running pre-push checks..."

# Only run E2E tests on push to main
current_branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$current_branch" = "main" ]; then
  echo "1ï¸âƒ£  Running server E2E tests..."
  npm run test:e2e || exit 1
  
  echo "2ï¸âƒ£  Running tool E2E tests..."
  npm run test:e2e:tools || exit 1
  
  echo "3ï¸âƒ£  Running Docker E2E tests..."
  npm run docker:test || exit 1
fi

echo "âœ… All pre-push checks passed!"
